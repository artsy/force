{
  "name": "raven",
  "description": "A standalone (Node.js) client for Sentry",
  "keywords": [
    "raven",
    "sentry",
    "python",
    "errors",
    "debugging",
    "exceptions"
  ],
  "version": "0.7.0",
  "repository": {
    "type": "git",
    "url": "git://github.com/getsentry/raven-node.git"
  },
  "author": {
    "name": "Matt Robenolt",
    "email": "matt@ydekproductions.com"
  },
  "license": "BSD",
  "main": "index",
  "bin": {
    "raven": "./bin/raven"
  },
  "scripts": {
    "test": "NODE_ENV=test mocha --reporter dot && NODE_ENV=test coffee ./test/run.coffee"
  },
  "engines": {
    "node": ">= 0.6.0"
  },
  "dependencies": {
    "cookie": "0.1.0",
    "lsmod": "~0.0.3",
    "node-uuid": "~1.4.1",
    "stack-trace": "0.0.7",
    "connect": "*",
    "express": "*",
    "koa": "*"
  },
  "devDependencies": {
    "coffee-script": "~1.7.1",
    "glob": "~3.1.13",
    "mocha": "*",
    "mock-udp": "*",
    "nock": "~0.28.2",
    "should": "~3.3.1"
  },
  "optionalDependencies": {
    "connect": "*",
    "express": "*",
    "koa": "*"
  },
  "contributors": [
    {
      "name": "https://github.com/mattrobenolt/raven-node/graphs/contributors"
    }
  ],
  "readme": "# Raven [![Build Status](https://secure.travis-ci.org/getsentry/raven-node.png?branch=master)](http://travis-ci.org/getsentry/raven-node)\n**Node v0.11 compatible**\n\nLog errors and stack traces in [Sentry](http://getsentry.com/) from within your Node.js applications. Includes middleware support for [Connect](http://www.senchalabs.org/connect/)/[Express](http://expressjs.com/).\n\nAll processing and sending happens asynchronously to not slow things down if/when Sentry is down or slow.\n\n## Compatibility\n * 0.6.x\n * 0.8.x\n * 0.10.x\n * 0.11.x\n\nRaven 0.6+ requires Sentry 6.0+\n\n## Installation\n```\n$ npm install raven\n```\n\n## Methods\n```javascript\nnew raven.Client(String dsn[, Object options])\nclient.captureMessage(String message[[, Object options], Function callback])\nclient.captureError(Error error[[, Object options], Function callback])\nclient.captureQuery(String query[[, String type], Function callback])\n```\n\n## Basic Usage\n```javascript\nvar raven = require('raven');\nvar client = new raven.Client('{{ SENTRY_DSN }}');\n\nclient.captureMessage('Hello, world!');\n```\nYou can specify a level in the second optional parameter. Default level is `error`\n\n\n**There are 5 logging levels (in order):**\n * debug (the least serious)\n * info\n * warning\n * error\n * fatal (the most serious)\n\n```javascript\nvar raven = require('raven');\n\nvar client = new raven.Client('{{ SENTRY_DSN }}');\n\nclient.captureMessage(\"Another message\", {level: 'info'})\n```\n\n**Adding extra info to messages**\n```javascript\nvar raven = require('raven');\n\nvar client = new raven.Client('{{ SENTRY_DSN }}');\n\nclient.captureMessage(\"Another message\", {level: 'info', extra: {'key': 'value'}})\n```\n\n## Logging an error\n```javascript\nclient.captureError(new Error('Broke!'));\n```\n\n## Logging a query\n```javascript\nclient.captureQuery('SELECT * FROM `awesome`', 'mysql');\n```\n\n## Sentry Identifier\n```javascript\nclient.captureMessage('Hello, world!', function(result) {\n    console.log(client.getIdent(result));\n});\n```\n\n```javascript\nclient.captureError(new Error('Broke!'), function(result) {\n  console.log(client.getIdent(result));\n});\n```\n\n__Note__: `client.captureMessage` will also return the result directly without the need for a callback, such as: `var result = client.captureMessage('Hello, world!');`\n\n## Events\nIf you really care if the event was logged or errored out, Client emits two events, `logged` and `error`:\n\n```javascript\nclient.on('logged', function(){\n  console.log('Yay, it worked!');\n});\nclient.on('error', function(e){\n  console.log('oh well, Sentry is broke.');\n})\nclient.captureMessage('Boom');\n```\n\n### Error Event\nThe event error is augmented with the original Sentry response object as well as the response body and statusCode for easier debugging.\n\n```javascript\nclient.on('error', function(e){\n  console.log(e.reason);  // raw response body, usually contains a message explaining the failure\n  console.log(e.statusCode);  // status code of the http request\n  console.log(e.response);  // entire raw http response object\n});\n```\n\n## Environment variables\n### SENTRY_DSN\nOptionally declare the DSN to use for the client through the environment. Initializing the client in your app won't require setting the DSN.\n\n### SENTRY_NAME\nOptionally set the name for the client to use. [What is name?](http://raven.readthedocs.org/en/latest/config/index.html#name)\n\n### SENTRY_SITE\nOptionally set the site for the client to use. [What is site?](http://raven.readthedocs.org/en/latest/config/index.html#site)\n\n## Catching global errors\nFor those times when you don't catch all errors in your application. ;)\n\n```javascript\nclient.patchGlobal();\n// or\nraven.patchGlobal(client);\n// or\nraven.patchGlobal('{{ SENTRY_DSN }}');\n```\n\nIt is recommended that you don't leave the process running after receiving an `uncaughtException` (http://nodejs.org/api/process.html#process_event_uncaughtexception), so an optional callback is provided to allow you to hook in something like:\n\n```javascript\nclient.patchGlobal(function() {\n  console.log('Bye, bye, world.');\n  process.exit(1);\n});\n```\n\nThe callback is called **after** the event has been sent to the Sentry server.\n\n## Integrations\n### Connect/Express middleware\nThe Raven middleware can be used as-is with either Connect or Express in the same way. Take note that in your middlewares, Raven must appear _after_ your main handler to pick up any errors that may result from handling a request.\n\n#### Connect\n```javascript\nvar connect = require('connect');\nfunction mainHandler(req, res) {\n  throw new Error('Broke!');\n}\nfunction onError(err, req, res, next) {\n  // The error id is attached to `res.sentry` to be returned\n  // and optionally displayed to the user for support.\n  res.statusCode = 500;\n  res.end(res.sentry+'\\n');\n}\nconnect(\n  connect.bodyParser(),\n  connect.cookieParser(),\n  mainHandler,\n  raven.middleware.connect('{{ SENTRY_DSN }}'),\n  onError, // optional error handler if you want to display the error id to a user\n).listen(3000);\n```\n\n#### Express\n```javascript\nvar app = require('express')();\napp.use(app.router);\napp.use(raven.middleware.express('{{ SENTRY_DSN }}'));\napp.use(onError); // optional error handler if you want to display the error id to a user\napp.get('/', function mainHandler(req, res) {\n  throw new Error('Broke!');\n});\napp.listen(3000);\n```\n\n__Note__: `raven.middleware.express` or `raven.middleware.connect` *must* be added to the middleware stack *before* any other error handling middlewares or there's a chance that the error will never get to Sentry.\n\n## Coffeescript\nIn order to use raven-node with coffee-script or another library which overwrites\nError.prepareStackTrace you might run into the exception \"Traceback does not support Error.prepareStackTrace being defined already.\"\n\nIn order to not have raven-node (and the underlying raw-stacktrace library) require\nTraceback you can pass your own stackFunction in the options. For example:\n\n```javascript\nvar client = new raven.Client('{{ SENTRY_DSN }}', { stackFunction: {{ Your stack function }}});\n```\n\nSo for example:\n```javascript\nvar client = new raven.Client('{{ SENTRY_DSN }}', {\n  stackFunction: Error.prepareStackTrace\n});\n```\n\n## Disable Raven\nPass `false` as the DSN (or any falsey value).\n\n```javascript\nclient = new raven.Client(process.env.NODE_ENV === 'production' && '{{ SENTRY_DSN }}')\n```\n\n__Note__: We don't infer this from `NODE_ENV` automatically anymore. It's up to you to implement whatever logic you'd like.\n\n## Support\nYou can find me on IRC. I troll in `#sentry` on `freenode`.\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/getsentry/raven-node/issues"
  },
  "homepage": "https://github.com/getsentry/raven-node",
  "_id": "raven@0.7.0",
  "dist": {
    "shasum": "b6202ccfa9e01f9a2b8255addb6b7d688358a375"
  },
  "_from": "raven@*",
  "_resolved": "http://registry.npmjs.org/raven/-/raven-0.7.0.tgz"
}
